@model EMS.Models.Registration

<form asp-action="Register" method="post" id="registerForm">
    <div class="form-group">
        <label for="Username">Username</label>
        <input type="text" class="form-control" id="Username" name="Username" required />
    </div>

    <div class="form-group">
        <label for="Email">Email</label>
        <input type="email" class="form-control" id="Email" name="Email" required />
    </div>


    <!-- Password Field 
    <div class="form-group">
        <label for="Password">Password</label>
        <input type="password" class="form-control" id="Password" name="Password" required minlength="8" />
        <small class="form-text text-muted">Password must be at least 8 characters.</small>
    </div>


    <div class="form-group">
        <label for="ConfirmPassword">Confirm Password</label>
        <input type="password" class="form-control" id="ConfirmPassword" name="ConfirmPassword" required />
    </div>


    -->






    <!-- Password Field NEW -->
    <div class="form-group">
        <label for="Password">Password</label>
        <input type="password" class="form-control" id="Password" name="Password" required minlength="8" />
        <small class="form-text text-muted">Password must meet the following requirements:</small>
        <ul id="password-requirements" class="text-muted">
            <li id="length" class="text-danger">At least 8 characters</li>
            <li id="uppercase" class="text-danger">At least one uppercase letter</li>
            <li id="lowercase" class="text-danger">At least one lowercase letter</li>
            <li id="digit" class="text-danger">At least one number</li>
        </ul>
    </div>

    <div class="form-group">
        <label for="ConfirmPassword">Confirm Password</label>
        <input type="password" class="form-control" id="ConfirmPassword" name="ConfirmPassword" required />
        <small id="confirmPasswordMessage" class="form-text text-muted text-danger" style="display: none;">Passwords do not match.</small>
    </div>






    <button type="submit" class="btn btn-primary">Register</button>
</form>

<script>
    // Dynamic password validation
    document.getElementById("Password").addEventListener("input", function () {
        const password = this.value;

        // Validate length
        if (password.length >= 8) {
            document.getElementById("length").classList.remove("text-danger");
            document.getElementById("length").classList.add("text-success");
        } else {
            document.getElementById("length").classList.remove("text-success");
            document.getElementById("length").classList.add("text-danger");
        }

        // Validate uppercase
        if (/[A-Z]/.test(password)) {
            document.getElementById("uppercase").classList.remove("text-danger");
            document.getElementById("uppercase").classList.add("text-success");
        } else {
            document.getElementById("uppercase").classList.remove("text-success");
            document.getElementById("uppercase").classList.add("text-danger");
        }

        // Validate lowercase
        if (/[a-z]/.test(password)) {
            document.getElementById("lowercase").classList.remove("text-danger");
            document.getElementById("lowercase").classList.add("text-success");
        } else {
            document.getElementById("lowercase").classList.remove("text-success");
            document.getElementById("lowercase").classList.add("text-danger");
        }

        // Validate digit
        if (/[0-9]/.test(password)) {
            document.getElementById("digit").classList.remove("text-danger");
            document.getElementById("digit").classList.add("text-success");
        } else {
            document.getElementById("digit").classList.remove("text-success");
            document.getElementById("digit").classList.add("text-danger");
        }
    });

    // Confirm Password Validation
    document.getElementById("ConfirmPassword").addEventListener("input", function () {
        const confirmPasswordMessage = document.getElementById("confirmPasswordMessage");
        if (this.value === document.getElementById("Password").value) {
            confirmPasswordMessage.style.display = "none";
        } else {
            confirmPasswordMessage.style.display = "block";
        }
    });











    // Disable client-side validation if there are server-side validation errors
    var serverErrors = @Html.Raw(Json.Serialize(ViewData.ModelState.Values.Any(v => v.Errors.Count > 0)));
    if (serverErrors) {
        document.getElementById("registerForm").novalidate = true;
    }
</script>


